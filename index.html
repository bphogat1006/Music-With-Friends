<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Music With Friends</title>
    <link rel="shortcut icon" type="image/png" href="favicon.png"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link href="style.css" rel="stylesheet">
  </head>

  <body onload="onPageLoad()">
    <div class="container">
      
      <div id="request-authorization" class="row my-5">
        <div class="mb-3">
          <h1 class="display-6">Click below to authenticate with Spotify</h1> 
        </div>
        <input id="authenticate-button" class="btn btn-lg btn-primary" type="button" onclick="requestAuthorization()" value="Request Authorization"></input>
      </div>
      
      <div id="user-data" class="row my-5">

        <div id="user-profile">
          <div class="d-flex align-items-center">
            <h1 id="display-name" class="display-1 me-3">Hello, </h1>
            <img id="profile-picture" class="img-fluid rounded-pill m-3">
          </div>
        </div>

        <div id="top-listens-information">
          <div class="d-flex align-items-center">
            <p class="display-6 my-3">Here are your top artists and tracks.</p>
            <div id="loading-top-listens" class="spinner-border ms-3 text-primary" role="status" aria-hidden="true"></div>
          </div>
          
          <select id="select-period" class="form-select form-select-lg mb-4" onchange="refetch(this)">
            <option value="short_term">Short-Term</option>
            <option value="medium_term">Medium-Term</option>
            <option value="long_term">Long-Term</option>
          </select>
          
          <div class="row">
            <div class="col">
              <h3 class="p-2 text-center">Top Artists</h1>
              <ul id="top-artists-list" class="list-group list-group-flush mx-3"></ul>
            </div>
            <div class="col">
              <h3 class="p-2 text-center">Top Tracks</h1>
              <ul id="top-tracks-list" class="list-group list-group-flush mx-3"></ul>
            </div>
          </div>
        </div>

      </div>
      
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
    <script src="credentials.js"></script>
    <script src="app.js"></script>
    <script src="userData.js"></script>
    <script>
      function refetch(selectObject) {
        fetchPeriod = selectObject.value
        document.getElementById('top-artists-list').innerHTML = ''
        getTopListens()
        document.getElementById('top-tracks-list').innerHTML = ''
      }
    </script>
  </body>

</html>